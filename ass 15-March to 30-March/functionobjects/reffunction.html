<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!--Load and externally hosted JavaScript Document-->
    <script src="./reffunction.js"></script>
    <script src="./mathxt.js"></script>
    <script src="./uigenerator.js"></script>
    <script>
        window.onload = function () {
            // lets instantiate the Mathematics object
            var mathObj = new Mathematics();

            var btnAdd = document.getElementById('btnadd');

            btnAdd.addEventListener('click', function () {
                var a = parseInt(document.getElementById('txtn1').value);
                var b = parseInt(document.getElementById('txtn2').value);


                var z = mathObj.add(a, b);
                document.getElementById('txtres').value = z;
            }, false);

            var btnsqAdd = document.getElementById('btnsqadd');

            btnsqAdd.addEventListener('click', function () {
                var a = parseInt(document.getElementById('txtn1').value);
                var b = parseInt(document.getElementById('txtn2').value);

                var z = mathObj.addSquare(a, b);;
                document.getElementById('txtres').value = z;
            }, false);

            var btnmult = document.getElementById('btnmult');

            btnmult.addEventListener('click', function () {
                var a = parseInt(document.getElementById('txtn1').value);
                var b = parseInt(document.getElementById('txtn2').value);

                var z = mathObj.mult(a, b);;
                document.getElementById('txtres').value = z;
            }, false);

            var names = ['James Bond', 'Jack Reacher', 'Jason Bourn', 'Indiana Jones', 'EThan Hunt'];

            // var employees = ['James ', 'Jack ', 'Jason ', 'Indiana ', 'EThan '];
            var employees = []
            var employeeIds = [];
            var update = document.getElementById("update");
            update.addEventListener('click', function () {
               var idToBeUpdated= document.getElementById('txtseno').value;
               var nameToBeUpdated= document.getElementById('txtsename').value;
            console.log("EMPLOYEES",employees);
            for(i=0;i<employees.length;i++){
                if(employees[i].EmpNo==idToBeUpdated){
                employees[i].EmpName=nameToBeUpdated;
               }
            }
            var tabledata = [];
            var heading = [];

            var emp = {
                    EmpNo: parseInt(document.getElementById('txtseno').value),
                    EmpName: document.getElementById('txtsename').value
                };
                localStorage.setItem('Emp-' + emp.EmpNo, JSON.stringify(emp));

            var p = Object.keys(emp);
                console.log("my data" + p);
                for (var i = 0; i < p.length; i++) {
                    // heading += '<tr><th>'+p[0]+'</th><th>'+p[1]+'</th><th>'+p[2]+'</th><th>'+p[3]+'</th><th>'+p[4]+'</th></tr>' ;
                    heading += '<th>' + p[i] + '</th>';
                }
                for (var i = 0; i < employees.length; i++) {
                    console.log("employess updated",employees)
                    tabledata += '<tr>'
                    for (var j in p) {
                        tabledata += '<td>' + employees[i][p[j]] + '</td>';
                    }
                    tabledata += '</tr>';
                }
                tbodyid.innerHTML = tabledata;
             
            }, false);

            btnsessionsave.addEventListener('click', function () {
                var final = [];
                var txtsename = document.getElementById('txtsename').value;
                var txtseno = document.getElementById('txtseno').value;
                final.push({
                    EmpNo: txtsename,
                    EmpName: txtseno
                })
                console.log("txtsename", txtsename)
                employees.push(
                    {
                        EmpNo: txtseno,
                        EmpName: txtsename
                    }
                );
                employeeIds.push(txtseno);
                var emp = {
                    EmpNo: parseInt(document.getElementById('txtseno').value),
                    EmpName: document.getElementById('txtsename').value
                };
                //  sessionStorage.setItem('Emp-' + emp.EmpNo, JSON.stringify(emp));
                localStorage.setItem('Emp-' + emp.EmpNo, JSON.stringify(emp));

                console.log(localStorage.getItem(emp));
                console.log("employees", employees)
                //var uiGenerator1 = new UIGenerator1(final);
                var table = document.getElementById("table");
                var theadid = document.getElementById("theadid");
                var tbodyid = document.getElementById("tbodyid");
                var update = document.getElementById("update");

                var heading = [];
                console.log("my daddta----" + Object.keys(emp));

                var p = Object.keys(emp);
                console.log("my data" + p);
                for (var i = 0; i < p.length; i++) {
                    // heading += '<tr><th>'+p[0]+'</th><th>'+p[1]+'</th><th>'+p[2]+'</th><th>'+p[3]+'</th><th>'+p[4]+'</th></tr>' ;
                    heading += '<th>' + p[i] + '</th>';
                }
                theadid.innerHTML = heading;
                var tabledata = [];
                for (var i = 0; i < employees.length; i++) {
                    tabledata += '<tr>'
                    for (var j in p) {
                        tabledata += '<td>' + employees[i][p[j]] + '</td>';
                    }
                    tabledata += '</tr>';
                }
                tbodyid.innerHTML = tabledata;
                console.log("tabeldata", tabledata);
                console.log("tabeldata", JSON.stringify(final));

                // var uiGeneratorids = new UIGenerator1(employeeIds);

                //document.getElementById('dvselectIds').innerHTML = uiGeneratorids.select();

                document.getElementById('dvselect1').innerHTML = uiGenerator1.select();

            }, false);



           






            var employeeDetails = [{ EmpNo: 101, EmpName: "A", deptName: 'CSE', designation: 'teacher' }, { EmpNo: 101, EmpName: "A", deptName: 'BBA', designation: 'student' }]
            // var names = [];
            var uiGenerator = new UIGenerator(names);
            // var uiGenerator1 = new UIGenerator1(employees);
            var uiGenerator2 = new UIGenerator2(employeeDetails);
            var uiGenerator3 = new UIGenerator3(employeeDetails);

            document.getElementById('dvselect').innerHTML = uiGenerator.select();
            // document.getElementById('dvselect1').innerHTML = uiGenerator1.select();
            document.getElementById('dvselect2').innerHTML = uiGenerator2.select();
            document.getElementById('dvselect3').innerHTML = uiGenerator3.select();
            var table = document.getElementById("table");
            var theadid = document.getElementById("theadid");
            var tbodyid = document.getElementById("tbodyid");


        }
    </script>
</head>

<body>
    <h1>Using the REference function</h1>
    <table>
        <tbody>
            <tr>
                <td>Num 1</td>
                <td>
                    <input type="text" id="txtn1">
                </td>
            </tr>
            <tr>
                <td>Num 2</td>
                <td>
                    <input type="text" id="txtn2">
                </td>
            </tr>
            <tr>
                <td>Result</td>
                <td>
                    <input type="text" id="txtres" disabled>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="button" value="Add" id="btnadd">
                </td>
                <td>
                    <input type="button" value="Square Add" id="btnsqadd">
                </td>
                <td>
                    <input type="button" value="Multiply" id="btnmult">
                </td>
            </tr>
        </tbody>
    </table>
    <table>
        <tbody>
            <tr>
                <td colspan="2">
                    Using the Session Storage
                </td>
            </tr>
            <tr>
                <td>
                    <label>EmpNo</label>
                    <input type="text" id="txtseno">
                </td>
            <tr>
                <td>
                    <label>EmpName</label>
                    <input type="text" id="txtsename">
                </td>

            </tr>
            <tr>
                <td>
                    <input type="button" value="Session Save" id="btnsessionsave">
                </td>
                <td>
                    <input type="button" value="Update" id="update">
                </td>

            </tr>
        </tbody>
    </table>
    <hr />
    <div id="dvselect"></div>
    <div id="dvselectIds"></div>
    <table id="table" border="1">
        <thead id="theadid"></thead>
        <tbody id="tbodyid"></tbody>
    </table>
    <div id="dvselect1"></div>
    <div id="dvselect2"></div>
    <div id="dvselect3"></div>


</html>